---
import type { CollectionEntry } from 'astro:content';

interface Props {
	faqs: {
		question: string;
		answer: string;
	}[];
}

const { faqs } = Astro.props;

// Generate FAQPage Schema
const faqSchema = {
	'@context': 'https://schema.org',
	'@type': 'FAQPage',
	mainEntity: faqs.map((faq) => ({
		'@type': 'Question',
		name: faq.question,
		acceptedAnswer: {
			'@type': 'Answer',
			text: faq.answer,
		},
	})),
};
---

<script type='application/ld+json' set:html={JSON.stringify(faqSchema)} />

<div class='space-y-4'>
	<h2 class='text-2xl font-bold text-gray-900 mb-6'>
		Frequently Asked Questions
	</h2>
	{
		faqs.map((faq) => (
			<details class='group bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden'>
				<summary class='flex items-center justify-between p-4 cursor-pointer bg-gray-50 group-hover:bg-blue-50 transition-colors'>
					<h3 class='font-bold text-gray-800 text-lg'>{faq.question}</h3>
					<span class='text-gray-400 group-open:rotate-180 transition-transform'>
						<svg
							class='w-5 h-5'
							fill='none'
							stroke='currentColor'
							viewBox='0 0 24 24'
						>
							<path
								stroke-linecap='round'
								stroke-linejoin='round'
								stroke-width='2'
								d='M19 9l-7 7-7-7'
							/>
						</svg>
					</span>
				</summary>
				<div class='p-4 text-gray-600 leading-relaxed border-t border-gray-100'>
					<p>{faq.answer}</p>
				</div>
			</details>
		))
	}
</div>
