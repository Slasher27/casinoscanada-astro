---
import { db } from '../../db/client';

interface Props {
	casinoId: string;
	seoTitle?: string; // <--- NEW PROP
}

const { casinoId, seoTitle } = Astro.props; // <--- Extract it

const casino = db
	.prepare('SELECT * FROM casinos WHERE id = ?')
	.get(casinoId) as any;

if (!casino) {
	console.error(`Error: Casino ID "${casinoId}" not found in DB.`);
}
---

{
	casino && (
		<header class='bg-slate-900 rounded-3xl p-6 md:p-8 mb-10 text-white shadow-xl relative overflow-hidden'>
			<div class='absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2' />

			<div class='flex flex-col md:flex-row items-center gap-6 md:gap-8 relative z-10'>
				<div class='w-28 h-28 md:w-32 md:h-32 bg-white rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg'>
					{casino.logo_url ? (
						<img
							src={casino.logo_url}
							alt={`${casino.name} logo`}
							class='w-full h-full object-contain rounded-xl'
						/>
					) : (
						<span class='text-slate-900 font-bold text-4xl'>
							{casino.name.charAt(0)}
						</span>
					)}
				</div>

				<div class='flex-grow text-center md:text-left space-y-3'>
					<div>
						<h1 class='text-2xl md:text-4xl font-black tracking-tight mb-2 leading-tight'>
							{seoTitle || `${casino.name} Review`}
						</h1>

						<p class='text-slate-400 text-sm font-medium uppercase tracking-wider'>
							Updated for Canadian Players
						</p>
					</div>

					<div class='flex flex-wrap justify-center md:justify-start gap-3 text-xs md:text-sm font-bold'>
						<div class='bg-slate-800 border border-slate-700 px-3 py-1.5 rounded-lg flex items-center gap-2'>
							<span>‚ö° Payout:</span>
							<span class='text-white'>{casino.payout_speed_minutes} mins</span>
						</div>
						<div class='bg-slate-800 border border-slate-700 px-3 py-1.5 rounded-lg flex items-center gap-2'>
							<span>üõ°Ô∏è License:</span>
							<span class='text-white'>{casino.license}</span>
						</div>
						<div class='bg-slate-800 border border-slate-700 px-3 py-1.5 rounded-lg flex items-center gap-2'>
							<span>üìà RTP:</span>
							<span class='text-green-400'>{casino.payout_ratio}%</span>
						</div>
					</div>
				</div>

				<div class='flex-shrink-0 text-center w-full md:w-auto mt-4 md:mt-0 bg-slate-800/50 p-4 rounded-2xl border border-slate-700/50'>
					<div class='text-sm text-slate-400 font-bold mb-1'>
						Exclusive Bonus
					</div>
					<div class='text-2xl md:text-3xl font-black text-yellow-400 mb-4 leading-tight max-w-[200px] mx-auto'>
						{casino.bonus_offer}
					</div>
					<a
						href={casino.website_url}
						target='_blank'
						rel='nofollow noopener'
						class='inline-block w-full md:w-auto bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all'
					>
						Play Now
					</a>
				</div>
			</div>
		</header>
	)
}
