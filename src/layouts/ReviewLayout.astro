---
import BaseLayout from './BaseLayout.astro';
import SidebarCasinos from '../components/ui/SidebarCasinos.astro';

interface Props {
	frontmatter: any; // The MDX data
	headings?: { depth: number; slug: string; text: string }[]; // For TOC
}

const { frontmatter, headings } = Astro.props;
---

<BaseLayout title={frontmatter.title} description={frontmatter.metaDescription}>
	<div class='max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-12'>
		<main class='lg:col-span-8'>
			<slot />
		</main>

		<aside class='lg:col-span-4 space-y-8'>
			<div class='sticky top-8 space-y-8'>
				<SidebarCasinos />

				{
					headings && headings.length > 0 && (
						<div class='bg-gray-50 rounded-xl p-6 border border-gray-200'>
							<h4 class='font-bold text-gray-900 mb-4 text-sm uppercase'>
								On This Page
							</h4>
							<ul class='space-y-2 text-sm'>
								{headings
									.filter((h) => h.depth <= 2)
									.map((h) => (
										<li>
											<a
												href={`#${h.slug}`}
												class='text-gray-600 hover:text-blue-600 transition-colors'
											>
												{h.text}
											</a>
										</li>
									))}
							</ul>
						</div>
					)
				}
			</div>
		</aside>
	</div>
</BaseLayout>
